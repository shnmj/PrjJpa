<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
  <h2>Home</h2>
  <div><a href="http://localhost:9090/hello.html">hello.html</a></div>
  <div><a href="/hello.html">hello.html</a></div>
  <div><a href="/hi">Greetings</a></div>
  <div><a href="/hi2">원영님 반갑습니다 </a></div>
  <div><a href="/hi3">반갑습니다(부트스트랩) </a></div>
  <div><a href="/hi4">반갑습니다(include 기술사용) </a></div>
  <div>&nbsp;</div>
  <div><a href="/articles/WriteForm">새 글쓰기</a></div>
  <div><a href="/articles/1">1번 글 조회</a></div>
  <div><a href="/articles/List">글 목록 조회</a></div>
  <div>&nbsp;</div>
  <div><a href="/apitest.html">API test</a></div>
  <div>&nbsp;</div>
  <div><a href="/RestExam">Rest Api Get</a></div>  
  <div>
    <form action="/RestExam" method="GET">      
       <input type="submit" value="GET" />
    </form>
  </div>  
  <div>
    <form action="/RestExam" method="post">
       <input type="submit" value="POST" />
    </form>
  </div>  
  <div>
    <form action="/RestExam" method="PUT" >
       <input type="submit" value="PUT" />
    </form>
  </div> 
  <div>
    <form action="/RestExam" method="DELETE">
      <input type="submit" value="DELETE" />
    </form>
  </div> 
   
   
  <div>&nbsp;</div>
  <div><a href="/h2-console">db 확인</a></div>
  
  <script>
    // form 안의 <input type="submit" />
    //           <input type="image" />
    //           <button></button>
    // 모두 form 의 submit 이벤트를 발생시킨다
    // submit 이벤트 form action 의 페이지로 이동
    //      form name 속성을 가진 input 들의 value 를 가지고 간다 
    
    const formEls  = document.querySelectorAll('form');
    console.dir(formEls)
    formEls.forEach( (form , i) => {
    	// form ==  formEls[i] == this  
    	form.addEventListener('submit', function( e )  {
           // submit event 의 기본이벤트(기능)을 중지 - e
           e.preventDefault();
           console.dir(e);
           // console.dir(this)     // this == e.target
           alert(e.submitter.value)
           fetch(this.action, {
               method : e.submitter.value
           })
            .then( (resp) => resp.text() )
            .then( (text)   =>  {
                  console.dir(text);
                  alert(text)
            } )
            .catch((error) => {
                console.dir(error) 
                alert(error) 
            })
            
        } )
    } );
    
   
    
  </script>
  
</body>
</html>















