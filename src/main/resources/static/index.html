<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<h2>Home</h2>
	<div><a href="/hello.html">hello.html</a></div>
	<div><a href="/hi">Greetings</a></div>
	<div><a href="/hi2">SHIN님 Hi(Model)</a></div>
	<div><a href="/hi3">반갑습니다(부트스트랩)</a></div>
	<div><a href="/hi4">반갑습니다(include 사용)</a></div>
	<div>&nbsp;</div>
	<div>&nbsp;</div>
	<div><a href="/articles/WriteForm">새 글쓰기</a></div>
	<div><a href="/articles/1">1번 글 조회</a></div>
	<div><a href="/articles/List">글 목록</a></div>
	<div>&nbsp;</div>
	<div><a href="/apitest.html">API TEST</a></div>
	<div>&nbsp;</div>
	<div><a href="/RestExam">Rest Api Get</a></div>	
	<div>
		<form action="/RestExam" method="GET">
			<input type="submit" value="GET" />
		</form>	
	</div>	
	<div>
		<form action="/RestExam" method="POST">
			<input type="submit" value="POST" />
		</form>
	</div>	
	<div>
		<form action="/RestExam" method="PUT">
			<input type="submit" value="PUT" />
		</form>
	</div>	
	<div>
		<form action="/RestExam" method="DELETE">
			<input type="submit" value="DELETE" />
		</form>	
	</div>	
	
	<div>&nbsp;</div>
	<div><a href="/h2-console">DB 확인</a></div>
	
	<script>
		/*
		form tag에 있는 <input type="submit" />
		 							  <input type="image" />
									  <button></button>
		모두 submit event를 발생 시킴
		submit event form action의 페이지로 이동 
		form name 속성을 가진 input들의 value를 가지고 감
		*/
		
		const formEls = document.querySelectorAll('form');
		console.dir(formEls)
		formEls.forEach( (form,  i) => {    // 요즘 js 이 문법 많이 씀
		//	form == formEls[i] == this    // i, form이 없으면 this 씀
			form.addEventListener('submit', function(e) {
				// submit event의 기본 이벤트(기능)를 중지 - e
				e.preventDefault(); 
				console.dir(e);     // form에 발생시킨 event 정보 출력
				// console.dir(this)   // this == e.target
				alert(e.submitter.value)
				fetch(this.action,  {
					method : e.submitter.value
				})
					.then((resp) => resp.text() ) 
					.then((text)  => {
						console.dir(text);  // 도착한 데이터가 response,
						alert(text)
					})
					.catch((error) => {
						console.dir(error)
						alert(error)
					})
				} )
					
		});
	</script>

	</body>
	
</html>