<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<h2>Articles API tester</h2>
	<fieldset>
		<label>ID</label>
		<input type="number" id="id" value="1" /> <br>
		<label>제목</label>
		<input type="text" id="title" /> <br>
		<label>내용</label>
		<textarea id="content" rows="3" /></textarea><br>
	</fieldset>
		<div id="output"></div>
	<ul>
		<li><a id="get" href="/api/articles">Article 목록 조회(get)</a></li>
		<li><a id="getOne" href="/api/articles">1번 Article 조회(get)</a></li>
		<li><a id="post" href="/api/articles">1번 Article 조회(get)</a></li>
	</ul>
	
	
	<script>
		const outputEl = document.querySelector('#output') 
		const aElList  = document.querySelectorAll('a')
		aElList.forEach((aEl, i) => {
			aEl.onclick  = (e) => {
			e.preventDefault(); // 기존 a href 기능 무력화
			// alert(aEl.id);
			
			switch(aEl.id) {
			
			case "get" :
			// == fetch(aEl.href, {method:'GET'})
			fetch(aEl.href, {method:'GET'})
				.then(response => response.json() )
				.then(json     => {
					outputEl.innerHTML = JSON.stringify(json);
				})
				.catch(error => console.log(error) );
			break;
			
			case "getOne" :
				const numId = document.querySelector('#id').value;
				fetch(aEl.href + "/" + numId )
					.then(response => response.json() )
					.then(json     => {
						console.dir(json)
						outputEl.innerHTML = JSON.stringify(json);
					})
					.catch(error => console.log(error) );
				break;
				
			
			case "post" :
				const numId2 = document.querySelector('#id').value;
				alert(numId2);
				fetch(aEl.href + "/" + numId2 )
					.then(response => response.json() )
					.then(json     => {
						console.dir(json)
						outputEl.innerHTML = JSON.stringify(json);
					})
					.catch(error => console.dir(error) );
				break;
				}
			}
		})
	
	</script>
</body>
</html>